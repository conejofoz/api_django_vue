(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-026e57c0"],{"0c73":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("96cf");var r=n("1da1"),a=n("d4ec"),i=n("bee2"),o=n("45eb"),c=n("7e84"),s=n("262e"),l=n("2caf"),u=n("b7dc"),m="cliente",p="vendas-detalhe",d="vendas",f=function(e){Object(s["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(i["a"])(n,[{key:"getCliente",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:-1,e.next=3,Object(o["a"])(Object(c["a"])(n.prototype),"get",this).call(this,m,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveCliente",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"save",this).call(this,m,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteCliente",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"delete",this).call(this,m,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getVenda",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,r,a,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:-1,r=s.length>1&&void 0!==s[1]?s[1]:"",a=s.length>2&&void 0!==s[2]?s[2]:"",i=s.length>3&&void 0!==s[3]?s[3]:"",e.next=6,Object(o["a"])(Object(c["a"])(n.prototype),"get",this).call(this,d,t,r,a,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveVenda",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"save",this).call(this,d,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveDetalheVenda",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"save",this).call(this,p,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDetalhe",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"delete",this).call(this,p,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getClienteByName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"get",this).call(this,"cliente/by-name",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getProdutoByName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"get",this).call(this,"produto/by-descricao",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getProdutos",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["a"])(Object(c["a"])(n.prototype),"get",this).call(this,"produto",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(u["a"])},"42b2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Layout",[n("PageHeader",{attrs:{title:e.title,items:e.items}}),n("b-row",[n("b-col",[n("b-card",[n("b-row",[n("b-col",{attrs:{sm:"6"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Filtro","label-for":"filterInput"}},[n("b-input-group",{attrs:{size:"sm"}},[n("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Buscar..."},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),n("b-input-group-append",[n("b-button",{attrs:{disabled:!e.filter},on:{click:function(t){e.filter=""}}},[n("b-icon",{attrs:{icon:"x","aria-hidden":"true"}})],1)],1)],1)],1)],1),n("b-col",{staticClass:"mt-4",attrs:{sm:"2"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal",modifiers:{modal:!0}}],attrs:{pill:"",variant:"primary"},on:{click:e.abrirModal}},[n("b-icon",{attrs:{icon:"folder-plus","aria-hidden":"true"}})],1),n("b-button",{attrs:{pill:"",variant:"success"},on:{click:e.iniciar}},[n("b-icon",{attrs:{icon:"arrow-clockwise","aria-hidden":"true"}})],1)],1)],1)],1)],1)],1),n("b-row",[n("b-col",[n("b-form-select",{attrs:{options:e.itens,"value-field":"id","text-field":"nome"},model:{value:e.cliente,callback:function(t){e.cliente=t},expression:"cliente"}})],1)],1),n("b-row",[n("b-col",[n("b-card",[n("b-table",{attrs:{stacked:"sm","label-sort-asc":"","label-sort-desc":"","label-sort-clear":"",dense:"",striped:"",hover:"",items:e.itens,fields:e.fields,"primary-key":"id",small:"","head-variant":"light",fixed:"",responsive:"sm",busy:e.loading,filter:e.filter,"show-empty":"",emptyText:"Não existe dados cadastrados",emptyFilteredText:"Nenhum registro encontrado"},scopedSlots:e._u([{key:"cell(acoes)",fn:function(t){return[n("b-icon",{staticClass:"mr-5",attrs:{icon:"pencil",size:"lg"},on:{click:function(n){return e.editar(t.item)}}}),n("b-icon",{attrs:{icon:"trash",size:"sm"},on:{click:function(n){return e.apagar(t.item)}}})]}},{key:"cell(imagem)",fn:function(t){return[n("img",{staticClass:"tamanhoImagem",attrs:{src:e.mostraImagem(t.item.imagem),alt:"",srcset:""}})]}}])})],1),n("b-modal",{attrs:{id:"modal",size:"xl",title:"Clientes","no-close-on-backdrop":"","no-close-on-esc":"","hide-footer":"",centered:"","hide-header-close":""},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"my-1"},[n("b-col",{attrs:{sm:"1"}},[n("label",{attrs:{for:"id"}},[e._v("Id:")])]),n("b-col",{attrs:{sm:"2"}},[n("b-form-input",{attrs:{disabled:"",type:"text"},model:{value:e.cliente.id,callback:function(t){e.$set(e.cliente,"id",t)},expression:"cliente.id"}})],1),n("b-col",{attrs:{sm:"1"}},[n("label",{attrs:{for:"nome"}},[e._v("Nome:")])]),n("b-col",[n("b-form-input",{directives:[{name:"capitalize",rawName:"v-capitalize"}],attrs:{type:"text",autofocus:""},model:{value:e.cliente.nome,callback:function(t){e.$set(e.cliente,"nome",t)},expression:"cliente.nome"}})],1)],1),n("b-row",[n("b-col",{attrs:{sm:"1"}},[n("label",{attrs:{for:"telefone"}},[e._v("Telefone:")])]),n("b-col",[n("b-form-input",{attrs:{type:"text",maxlength:"20"},model:{value:e.cliente.telefone,callback:function(t){e.$set(e.cliente,"telefone",t)},expression:"cliente.telefone"}})],1),n("b-col",{attrs:{sm:"1"}},[n("label",{attrs:{for:"email"}},[e._v("E-mail:")])]),n("b-col",[n("b-form-input",{ref:"email",attrs:{type:"text"},model:{value:e.cliente.email,callback:function(t){e.$set(e.cliente,"email",t)},expression:"cliente.email"}})],1)],1),n("b-row",[n("b-col",{attrs:{sm:"1"}},[n("b-form-checkbox",{attrs:{name:"check-button",switch:""},model:{value:e.cliente.estado,callback:function(t){e.$set(e.cliente,"estado",t)},expression:"cliente.estado"}},[e._v("Estado")])],1)],1),n("b-row",[n("b-form-file",{attrs:{state:Boolean(e.file),placeholder:"Escolha uma imagem...","drop-placeholder":"Drop file here..."},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),n("b-row",[n("b-col",{attrs:{sm:"1"}},[n("b-button",{staticClass:"mt-3",attrs:{variant:"danger",block:""},on:{click:e.fecharModal}},[e._v("Cancelar")])],1),n("b-col",[n("b-button",{staticClass:"mt-3",attrs:{variant:"success",block:""},on:{click:e.guardar}},[e._v("Guardar")])],1)],1)],1)],1)],1)],1)],1)},a=[],i=(n("4160"),n("a15b"),n("fb6a"),n("ac1f"),n("1276"),n("159b"),n("96cf"),n("1da1")),o=n("444f"),c=n("2579"),s=n("0c73"),l=n("0759"),u=n("bc3a"),m=n.n(u),p=n("c077"),d={name:"Cliente",components:{Layout:o["a"],PageHeader:c["a"],BIcon:l["a"]},mixins:[p["a"]],props:[],directives:{capitalize:function(e){var t=e.innerText.split(" ");t.forEach((function(e,n){t[n]=e.charAt(0).toUpperCase()+e.slice(1)})),e.innerText=t.join(" ")}},data:function(){return{title:"Clientes",items:[{text:"Dashboard",href:"/home"},{text:"Cliente",active:!0}],file:null,modalShow:!1,loading:!1,filter:"",api:new s["a"],img_url:null,fields:[{key:"id",label:"ID",sortable:!0},{key:"nome",label:"Nome",sortable:!0},{key:"telefone",label:"Telefone",sortable:!0},{key:"email",label:"E-mail",sortable:!0},{key:"estado",label:"estado",sortable:!0},{key:"acoes",label:"Ações",sortable:!1},{key:"imagem",label:"Imagem",sortable:!1}],itens:[],cliente:{id:-1,nome:"",telefone:"",email:"",estado:!0,imagem:null}}},created:function(){this.iniciar()},methods:{mostraImagem:function(e){var t="";return t=e||this.img_url+"media/img/empty.png",t},newFile:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.file=e.target.files[0],console.log(e),n.next=4,t.upload();case 4:case"end":return n.stop()}}),n)})))()},upload:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.api.getToken();case 2:r=n.sent,a="",a=new FormData,a.append("codigo",e),a.append("imagem",t.file),console.log("formulario: ",a),m.a.post("http://192.168.0.16:8000/rest/v1/upload/",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+r.access}}).then((function(e){console.log(e)}));case 9:case"end":return n.stop()}}),n)})))()},uploadAcademind:function(e){var t=new FormData;t.append("codigo",e),t.append("imagem",this.file),m.a.post("http://192.168.0.16:8000/rest/v1/upload/",t,{onUploadProgress:function(e){console.log("Upload Progress: "+Math.round(e.loaded/e.total*100)+"%")}}).then((function(e){console.log(e)}))},iniciar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log("iniciar clientes"),e.img_url=e.api.IMG_URL,e.loading=!0,t.next=6,e.api.getCliente(-1);case 6:if(n=t.sent,console.log("CLIENTES: ",n),void 0!==n){t.next=10;break}throw new Error("Sem resultado");case 10:"404"==n&&e.$router.push("404"),n.detail&&(e.$swal({title:"Atenção!",text:n.detail,icon:"warning"}),e.$router.push("login")),e.itens=n,console.log("fim clientes"),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),e.mensagemErro(t.t0);case 19:return t.prev=19,e.loading=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[0,16,19,22]])})))()},abrirModal:function(){this.file=null,this.cliente={},this.cliente.id=-1,this.modalShow=!0},fecharModal:function(){this.modalShow=!1},guardar_old:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.saveCliente(e.cliente);case 3:n=t.sent,void 0!=n.id?(e.mensagem("Cliente salvo com sucesso!"),e.cliente=[]):e.mensagemErro("Erro inesperado"),e.uploadAcademind(n.id),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.mensagemErro(t.t0);case 11:return t.prev=11,e.fecharModal(),e.iniciar(),t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,8,11,15]])})))()},guardar:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.validarEmail(e.cliente.email)){t.next=4;break}return e.$refs.email.focus(),e.$swal({title:"Atenção!",text:"E-mail inválido",icon:"warning"}),t.abrupt("return",!1);case 4:for(r in t.prev=4,e.loading=!0,e.cliente.imagem=e.file,n=new FormData,e.cliente)"imagem"==r?null!==e.cliente[r]&&n.append("imagem",e.cliente[r]):n.append(r,e.cliente[r]);return t.next=11,e.api.saveCliente(n);case 11:if(a=t.sent,console.log("resposta no clientevue",a),void 0==a.id){t.next=18;break}e.mensagem("Cliente salvo com sucesso!"),e.cliente=[],t.next=20;break;case 18:return e.$swal({title:"Erro!",text:a,icon:"error"}),t.abrupt("return",!1);case 20:e.fecharModal(),e.iniciar(),t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](4),e.mensagemErro(t.t0);case 27:return t.prev=27,e.loading=!1,t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[4,24,27,30]])})))()},editar:function(e){this.file=null,this.cliente=e,this.modalShow=!0},apagar:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.mensagemPergunta("".concat(e.nome),"Apagar cliente");case 3:if(!n.sent){n.next=9;break}return t.loading=!0,n.next=7,t.api.deleteCliente(e.id);case 7:t.mensagem("Cliente apagado"),t.iniciar();case 9:n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](0),t.mensagemErro(n.t0);case 14:return n.prev=14,t.loading=!1,t.iniciar,n.finish(14);case 18:case"end":return n.stop()}}),n,null,[[0,11,14,18]])})))()},validarEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}},computed:{}},f=d,b=(n("7b44"),n("2877")),h=Object(b["a"])(f,r,a,!1,null,null,null);t["default"]=h.exports},"7b44":function(e,t,n){"use strict";n("f2d0")},c077:function(e,t,n){"use strict";n("96cf");var r=n("1da1");t["a"]={methods:{mensagem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";this.$swal({title:t,text:e,icon:n,allowOutsideClick:!1,confirmButtonText:"Ok"})},mensagemPergunta:function(e,t){var n=arguments,a=this;return Object(r["a"])(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=n.length>2&&void 0!==n[2]?n[2]:"question",r.prev=1,r.next=4,a.$swal({title:t,text:e,icon:i,showCancelButton:!0,confirmButtonText:"Sim",cancelButtonText:"Não",reverseButtons:!0});case 4:return o=r.sent,r.abrupt("return",o.isConfirmed);case 8:r.prev=8,r.t0=r["catch"](1);case 10:case"end":return r.stop()}}),r,null,[[1,8]])})))()}}}},f2d0:function(e,t,n){}}]);
//# sourceMappingURL=chunk-026e57c0.15bd61c7.js.map