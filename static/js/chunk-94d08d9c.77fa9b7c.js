(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94d08d9c"],{"29b0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"account-pages my-5 pt-5"},[a("div",{staticClass:"container"},[e._t("default")],2)])])},s=[],i={components:{}},n=i,o=a("2877"),c=Object(o["a"])(n,r,s,!1,null,null,null);t["a"]=c.exports},"2df0":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Layout",[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-md-8 col-lg-6 col-xl-5"},[r("div",{staticClass:"card overflow-hidden"},[r("div",{staticClass:"bg-soft bg-primary"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-7"},[r("div",{staticClass:"text-primary p-4"},[r("h5",{staticClass:"text-primary"},[e._v("Seja bem vindo(a) !")]),r("p",[e._v("Faça login para continuar seu trabalho.")])])]),r("div",{staticClass:"col-5 align-self-end"},[r("img",{staticClass:"img-fluid",attrs:{src:a("7006"),alt:""}})])])]),r("div",{staticClass:"card-body pt-0"},[r("div",[r("router-link",{attrs:{tag:"a",to:"/"}},[r("div",{staticClass:"avatar-md profile-user-wid mb-4"},[r("span",{staticClass:"avatar-title rounded-circle bg-light"},[r("img",{attrs:{src:a("e347"),alt:"",height:"34"}})])])])],1),r("b-form",{staticClass:"p-2",on:{submit:function(t){return t.preventDefault(),e.tryToLogIn(t)}}},[r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-1",label:"Usuário","label-for":"input-1"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.email.$error},attrs:{id:"input-1",type:"text",placeholder:"Digite seu usuário"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e.submitted&&e.$v.email.$error?r("div",{staticClass:"invalid-feedback"},[e.$v.email.required?e._e():r("span",[e._v("Email is required.")]),e.$v.email.email?e._e():r("span",[e._v("Please enter valid email.")])]):e._e()],1),r("b-form-group",{staticClass:"mb-3",attrs:{id:"input-group-2",label:"Senha","label-for":"input-2"}},[r("b-form-input",{class:{"is-invalid":e.submitted&&e.$v.password.$error},attrs:{id:"input-2",type:"password",placeholder:"Informe sua senha"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e.submitted&&!e.$v.password.required?r("div",{staticClass:"invalid-feedback"},[e._v(" Password is required. ")]):e._e()],1),r("b-form-checkbox",{staticClass:"form-check",attrs:{id:"customControlInline",name:"checkbox-1",value:"accepted","unchecked-value":"not_accepted"}},[e._v(" Remember me ")]),r("div",{staticClass:"mt-3 d-grid"},[r("b-button",{staticClass:"btn-block",attrs:{type:"button",variant:"primary"},on:{click:e.login}},[e._v("Entrar")])],1),r("div",{staticClass:"mt-4 text-center"},[r("h5",{staticClass:"font-size-14 mb-3"},[e._v("Entre com suas redes sociais")]),r("ul",{staticClass:"list-inline"},[r("li",{staticClass:"list-inline-item"},[r("a",{staticClass:"social-list-item bg-primary text-white border-primary",attrs:{href:"javascript: void(0);"}},[r("i",{staticClass:"mdi mdi-facebook"})])]),r("li",{staticClass:"list-inline-item"},[r("a",{staticClass:"social-list-item bg-info text-white border-info",attrs:{href:"javascript: void(0);"}},[r("i",{staticClass:"mdi mdi-twitter"})])]),r("li",{staticClass:"list-inline-item"},[r("a",{staticClass:"social-list-item bg-danger text-white border-danger",attrs:{href:"javascript: void(0);"}},[r("i",{staticClass:"mdi mdi-google"})])])])]),r("div",{staticClass:"mt-4 text-center"},[r("router-link",{staticClass:"text-muted",attrs:{tag:"a",to:"/forgot-password"}},[r("i",{staticClass:"mdi mdi-lock me-1"}),e._v(" Esqueceu sua senha? ")])],1)],1)],1)]),r("div",{staticClass:"mt-5 text-center"},[r("p",[e._v(" Você não tem uma conta ? "),r("router-link",{staticClass:"fw-medium text-primary",attrs:{tag:"a",to:"/register"}},[e._v("Cria agora")])],1),r("p",[e._v(" © "+e._s((new Date).getFullYear())+" Infinity. Criado com "),r("i",{staticClass:"mdi mdi-heart text-danger"}),e._v(" by Guri Web ")])])])])])},s=[],i=(a("b0c0"),a("96cf"),a("1da1")),n=a("29b0"),o=a("5eef"),c={beforeRouteEnter:function(e,t,a){console.log("++++++++dentro da vm++++++++"),console.log("to: ",e.name),console.log("from: ",t.name),a((function(e){e.praOndeVai=t.name,null===e.praOndeVai&&(e.praOndeVai="home")}))},beforeRouteLeave:function(e,t,a){console.log("saida to: ",e.name),console.log("saida from: ",t.name),a()},components:{Layout:n["a"]},name:"Login",data:function(){return{praOndeVai:"",isAuthError:"",authError:"",username:"",password:"",api:new o["a"]}},mounted:function(){this.$refs.username.focus()},methods:{login:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.username,r=e.password,""!=a){t.next=5;break}return e.$swal("Requerido","Usuário Requerido","warning"),t.abrupt("return");case 5:if(!(""==r||r.length<=3)){t.next=8;break}return e.$swal("Requerido","Senha Requerida e deve ter no mínimo três caracteres","warning"),t.abrupt("return");case 8:return t.next=10,e.api.login(a,r);case 10:s=t.sent,"access"in s?(localStorage.setItem("access",s.access),localStorage.setItem("refresh",s.refresh),localStorage.setItem("user",JSON.stringify({username:"admin",email:"admin@themesbrand.com",token:"fake-jwt-token"})),localStorage.setItem("username",a),console.log("pra onde vai: ",e.praOndeVai),e.$router.push(e.praOndeVai),e.$root.$emit("login",a)):"detail"in s?e.mensagemErro(s.detail):"error"in s?e.mensagemErro(s.error):e.mensagemErro("Erro Inesperado");case 12:case"end":return t.stop()}}),t)})))()}}},l=c,u=a("2877"),d=Object(u["a"])(l,r,s,!1,null,"a255668e",null);t["default"]=d.exports},"5eef":function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("d3b7"),a("ac1f"),a("25f0"),a("1276"),a("96cf");var r=a("1da1"),s=a("d4ec"),i=a("bee2"),n=a("ade3"),o=function(){function e(){Object(s["a"])(this,e),Object(n["a"])(this,"decodeToken",(function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(t){return null}})),this.SERVER_URL="http://192.168.0.16:8000/rest/v1/",this.TOKEN_URL=this.SERVER_URL+"token/",this.REFRESH_URL=this.TOKEN_URL+"refresh/",this.credenciais=""}return Object(i["a"])(e,[{key:"login",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,a){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.credenciais={username:t,password:a},r=null,e.prev=2,e.next=5,fetch(this.TOKEN_URL,{method:"POST",body:JSON.stringify(this.credenciais),mode:"cors",headers:{"Content-Type":"application/json"}});case 5:return s=e.sent,e.next=8,s.json();case 8:r=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),r={error:e.t0.toString()};case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"getToken",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("access"),a=localStorage.getItem("refresh"),r="",!this.tokenExpired(t)){e.next=14;break}return e.prev=4,e.next=7,this.refreshToken(a);case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](4),e.abrupt("return",e.t0.toString());case 13:null==r?(localStorage.removeItem("access"),localStorage.removeItem("refresh"),t=null):(t=r.access,localStorage.setItem("access",t));case 14:return r={access:t,refresh:a},e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this,[[4,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"tokenExpired",value:function(e){e=this.decodeToken(e);var t=!1;if(null!=e){var a=Date.now()/1e3;e.exp<a&&(t=!0)}else t=!0;return t}},{key:"refreshToken",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("entrou no refreshtoken do auth"),a={refresh:t},r=null,e.prev=3,console.log("try"),e.next=7,fetch(this.REFRESH_URL,{method:"POST",body:JSON.stringify(a),mode:"cors",headers:{"Content-Type":"application/json"}});case 7:if(s=e.sent,200===s.status){e.next=10;break}throw new Error("ERRO DO SILVIAO");case 10:return e.next=12,s.json();case 12:r=e.sent,e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](3),console.log(e.t0),r=null,e.abrupt("return",!1);case 20:return console.log("zzz"),e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this,[[3,15]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()},7006:function(e,t,a){e.exports=a.p+"../static/img/profile-img.ba4e037e.png"},e347:function(e,t,a){e.exports=a.p+"../static/img/logo.f7686e58.svg"}}]);
//# sourceMappingURL=chunk-94d08d9c.77fa9b7c.js.map