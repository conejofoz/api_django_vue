{"version":3,"sources":["webpack:///./src/router/views/siscmpfc/fac/ApiFac.js","webpack:///./src/router/views/siscmpfc/fac/Cliente.vue?4ebc","webpack:///src/router/views/siscmpfc/fac/Cliente.vue","webpack:///./src/router/views/siscmpfc/fac/Cliente.vue?0c67","webpack:///./src/router/views/siscmpfc/fac/Cliente.vue?8607","webpack:///./src/router/views/siscmpfc/fac/Cliente.vue?b746","webpack:///./src/mixins/mensagensMixin.js"],"names":["contexto","ctxDet","ctxVenda","ApiFac","id","obj","dataInicial","dataFinal","empresa","termo","Api","render","_vm","this","_h","$createElement","_c","_self","attrs","title","items","staticClass","model","value","callback","$$v","filter","expression","on","$event","directives","name","rawName","modifiers","abrirModal","iniciar","itens","cliente","fields","loading","scopedSlots","_u","key","fn","row","editar","item","apagar","mostraImagem","imagem","modalShow","_v","$set","ref","Boolean","file","fecharModal","guardar","staticRenderFns","components","Layout","PageHeader","BIcon","mixins","mensagensMixin","props","capitalize","words","forEach","index","word","charAt","toUpperCase","slice","element","innerText","join","data","api","img_url","nome","telefone","email","estado","created","methods","result","uploadAcademind","fd","append","idCliente","umCliente","validarEmail","computed","component","mensagem","titulo","tipo","$swal","text","icon","allowOutsideClick","confirmButtonText","mensagemPergunta","showCancelButton","cancelButtonText","reverseButtons","isConfirmed"],"mappings":"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","file":"../static/js/chunk-026e57c0.15bd61c7.js","sourcesContent":["import Api from '../Api.js'\r\n\r\nconst contexto = \"cliente\"\r\n//const contexto = \"clientest\"\r\nconst ctxDet = \"vendas-detalhe\"\r\nconst ctxVenda = \"vendas\"\r\n\r\n\r\nexport class ApiFac extends Api{\r\n    \r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    async getCliente(id=-1){\r\n        return await super.get(contexto, id)\r\n    }\r\n\r\n    async saveCliente(obj){\r\n        return await super.save(contexto, obj)\r\n    }\r\n\r\n    async deleteCliente(id){\r\n        return await super.delete(contexto, id)\r\n    }\r\n   \r\n   \r\n    async getVenda(id=-1, dataInicial=\"\", dataFinal=\"\", empresa=\"\"){\r\n        return await super.get(ctxVenda, id, dataInicial, dataFinal, empresa)\r\n    }\r\n\r\n    async saveVenda(obj){\r\n        return await super.save(ctxVenda, obj)\r\n    }\r\n\r\n    async saveDetalheVenda(obj){\r\n        return await super.save(ctxDet, obj)\r\n    }\r\n\r\n    async deleteDetalhe(id){\r\n        return await super.delete(ctxDet, id)\r\n    }\r\n    async getClienteByName(termo){\r\n        return await super.get(\"cliente/by-name\", termo)\r\n    }\r\n    async getProdutoByName(termo){\r\n        return await super.get(\"produto/by-descricao\", termo)\r\n    }\r\n    async getProdutos(id){\r\n        return await super.get(\"produto\", id)\r\n    }\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',[_c('PageHeader',{attrs:{\"title\":_vm.title,\"items\":_vm.items}}),_c('b-row',[_c('b-col',[_c('b-card',[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"6\"}},[_c('b-form-group',{staticClass:\"mb-0\",attrs:{\"label\":\"Filtro\",\"label-for\":\"filterInput\"}},[_c('b-input-group',{attrs:{\"size\":\"sm\"}},[_c('b-form-input',{attrs:{\"type\":\"search\",\"id\":\"filterInput\",\"placeholder\":\"Buscar...\"},model:{value:(_vm.filter),callback:function ($$v) {_vm.filter=$$v},expression:\"filter\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"disabled\":!_vm.filter},on:{\"click\":function($event){_vm.filter = ''}}},[_c('b-icon',{attrs:{\"icon\":\"x\",\"aria-hidden\":\"true\"}})],1)],1)],1)],1)],1),_c('b-col',{staticClass:\"mt-4\",attrs:{\"sm\":\"2\"}},[_c('b-button',{directives:[{name:\"b-modal\",rawName:\"v-b-modal.modal\",modifiers:{\"modal\":true}}],attrs:{\"pill\":\"\",\"variant\":\"primary\"},on:{\"click\":_vm.abrirModal}},[_c('b-icon',{attrs:{\"icon\":\"folder-plus\",\"aria-hidden\":\"true\"}})],1),_c('b-button',{attrs:{\"pill\":\"\",\"variant\":\"success\"},on:{\"click\":_vm.iniciar}},[_c('b-icon',{attrs:{\"icon\":\"arrow-clockwise\",\"aria-hidden\":\"true\"}})],1)],1)],1)],1)],1)],1),_c('b-row',[_c('b-col',[_c('b-form-select',{attrs:{\"options\":_vm.itens,\"value-field\":\"id\",\"text-field\":\"nome\"},model:{value:(_vm.cliente),callback:function ($$v) {_vm.cliente=$$v},expression:\"cliente\"}})],1)],1),_c('b-row',[_c('b-col',[_c('b-card',[_c('b-table',{attrs:{\"stacked\":\"sm\",\"label-sort-asc\":\"\",\"label-sort-desc\":\"\",\"label-sort-clear\":\"\",\"dense\":\"\",\"striped\":\"\",\"hover\":\"\",\"items\":_vm.itens,\"fields\":_vm.fields,\"primary-key\":\"id\",\"small\":\"\",\"head-variant\":\"light\",\"fixed\":\"\",\"responsive\":\"sm\",\"busy\":_vm.loading,\"filter\":_vm.filter,\"show-empty\":\"\",\"emptyText\":\"Não existe dados cadastrados\",\"emptyFilteredText\":\"Nenhum registro encontrado\"},scopedSlots:_vm._u([{key:\"cell(acoes)\",fn:function(row){return [_c('b-icon',{staticClass:\"mr-5\",attrs:{\"icon\":\"pencil\",\"size\":\"lg\"},on:{\"click\":function($event){return _vm.editar(row.item)}}}),_c('b-icon',{attrs:{\"icon\":\"trash\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.apagar(row.item)}}})]}},{key:\"cell(imagem)\",fn:function(row){return [_c('img',{staticClass:\"tamanhoImagem\",attrs:{\"src\":_vm.mostraImagem(row.item.imagem),\"alt\":\"\",\"srcset\":\"\"}})]}}])})],1),_c('b-modal',{attrs:{\"id\":\"modal\",\"size\":\"xl\",\"title\":\"Clientes\",\"no-close-on-backdrop\":\"\",\"no-close-on-esc\":\"\",\"hide-footer\":\"\",\"centered\":\"\",\"hide-header-close\":\"\"},model:{value:(_vm.modalShow),callback:function ($$v) {_vm.modalShow=$$v},expression:\"modalShow\"}},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('b-row',{staticClass:\"my-1\"},[_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('label',{attrs:{\"for\":\"id\"}},[_vm._v(\"Id:\")])]),_c('b-col',{attrs:{\"sm\":\"2\"}},[_c('b-form-input',{attrs:{\"disabled\":\"\",\"type\":\"text\"},model:{value:(_vm.cliente.id),callback:function ($$v) {_vm.$set(_vm.cliente, \"id\", $$v)},expression:\"cliente.id\"}})],1),_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('label',{attrs:{\"for\":\"nome\"}},[_vm._v(\"Nome:\")])]),_c('b-col',[_c('b-form-input',{directives:[{name:\"capitalize\",rawName:\"v-capitalize\"}],attrs:{\"type\":\"text\",\"autofocus\":\"\"},model:{value:(_vm.cliente.nome),callback:function ($$v) {_vm.$set(_vm.cliente, \"nome\", $$v)},expression:\"cliente.nome\"}})],1)],1),_c('b-row',[_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('label',{attrs:{\"for\":\"telefone\"}},[_vm._v(\"Telefone:\")])]),_c('b-col',[_c('b-form-input',{attrs:{\"type\":\"text\",\"maxlength\":\"20\"},model:{value:(_vm.cliente.telefone),callback:function ($$v) {_vm.$set(_vm.cliente, \"telefone\", $$v)},expression:\"cliente.telefone\"}})],1),_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"E-mail:\")])]),_c('b-col',[_c('b-form-input',{ref:\"email\",attrs:{\"type\":\"text\"},model:{value:(_vm.cliente.email),callback:function ($$v) {_vm.$set(_vm.cliente, \"email\", $$v)},expression:\"cliente.email\"}})],1)],1),_c('b-row',[_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('b-form-checkbox',{attrs:{\"name\":\"check-button\",\"switch\":\"\"},model:{value:(_vm.cliente.estado),callback:function ($$v) {_vm.$set(_vm.cliente, \"estado\", $$v)},expression:\"cliente.estado\"}},[_vm._v(\"Estado\")])],1)],1),_c('b-row',[_c('b-form-file',{attrs:{\"state\":Boolean(_vm.file),\"placeholder\":\"Escolha uma imagem...\",\"drop-placeholder\":\"Drop file here...\"},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}})],1),_c('b-row',[_c('b-col',{attrs:{\"sm\":\"1\"}},[_c('b-button',{staticClass:\"mt-3\",attrs:{\"variant\":\"danger\",\"block\":\"\"},on:{\"click\":_vm.fecharModal}},[_vm._v(\"Cancelar\")])],1),_c('b-col',[_c('b-button',{staticClass:\"mt-3\",attrs:{\"variant\":\"success\",\"block\":\"\"},on:{\"click\":_vm.guardar}},[_vm._v(\"Guardar\")])],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <Layout>\r\n    <PageHeader :title=\"title\" :items=\"items\" />\r\n    <b-row>\r\n      <b-col>\r\n        <b-card>\r\n            <b-row>\r\n          <!--             <b-col>\r\n                <h4>Clientes</h4>\r\n            </b-col>\r\n -->\r\n          <b-col sm=\"6\">\r\n            <b-form-group label=\"Filtro\" label-for=\"filterInput\" class=\"mb-0\">\r\n              <b-input-group size=\"sm\">\r\n                <b-form-input\r\n                  v-model=\"filter\"\r\n                  type=\"search\"\r\n                  id=\"filterInput\"\r\n                  placeholder=\"Buscar...\"\r\n                ></b-form-input>\r\n                <b-input-group-append>\r\n                  <b-button :disabled=\"!filter\" @click=\"filter = ''\">\r\n                    <b-icon icon=\"x\" aria-hidden=\"true\"></b-icon>\r\n                  </b-button>\r\n                </b-input-group-append>\r\n              </b-input-group>\r\n            </b-form-group>\r\n          </b-col>\r\n\r\n          <b-col sm=\"2\" class=\"mt-4\">\r\n            <b-button\r\n              pill\r\n              v-b-modal.modal\r\n              variant=\"primary\"\r\n              @click=\"abrirModal\"\r\n            >\r\n              <b-icon icon=\"folder-plus\" aria-hidden=\"true\"></b-icon>\r\n            </b-button>\r\n            <b-button pill variant=\"success\" @click=\"iniciar\">\r\n              <b-icon icon=\"arrow-clockwise\" aria-hidden=\"true\"></b-icon>\r\n            </b-button>\r\n          </b-col>\r\n          </b-row>\r\n        </b-card>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <b-form-select\r\n          v-model=\"cliente\"\r\n          :options=\"itens\"\r\n          value-field=\"id\"\r\n          text-field=\"nome\"\r\n        ></b-form-select>\r\n      </b-col>\r\n    </b-row>\r\n\r\n    <b-row>\r\n      <b-col>\r\n        <b-card>\r\n          <b-table\r\n            stacked=\"sm\"\r\n            label-sort-asc=\"\"\r\n            label-sort-desc=\"\"\r\n            label-sort-clear=\"\"\r\n            dense\r\n            striped\r\n            hover\r\n            :items=\"itens\"\r\n            :fields=\"fields\"\r\n            primary-key=\"id\"\r\n            small\r\n            head-variant=\"light\"\r\n            fixed\r\n            responsive=\"sm\"\r\n            :busy=\"loading\"\r\n            :filter=\"filter\"\r\n            show-empty\r\n            emptyText=\"Não existe dados cadastrados\"\r\n            emptyFilteredText=\"Nenhum registro encontrado\"\r\n          >\r\n            <template v-slot:cell(acoes)=\"row\">\r\n              <!-- <b-button size=\"sm\" class=\"mr-1\" @click=\"info(row.item, row.index, $event.target)\">\r\n                            <b-icon>pencil</b-icon>\r\n                        </b-button>\r\n                        <b-button size=\"sm\" @click=\"row.toggleDetails\">\r\n                            {{ row.detailsShowing ? 'Hide' : 'Show'}} Details\r\n                        </b-button> -->\r\n\r\n              <b-icon icon=\"pencil\" size=\"lg\" class=\"mr-5\" @click=\"editar(row.item)\"></b-icon>\r\n              <b-icon icon=\"trash\" size=\"sm\" @click=\"apagar(row.item)\"></b-icon>\r\n            </template>\r\n\r\n            <template #cell(imagem)=\"row\">\r\n              <!-- <img :src=\"row.item.imagem\" style=\"height:50px\" alt=\"\" srcset=\"\"> -->\r\n              <img\r\n                :src=\"mostraImagem(row.item.imagem)\"\r\n                class=\"tamanhoImagem\"\r\n                alt=\"\"\r\n                srcset=\"\"\r\n              />\r\n              <!-- <img :src=\"`${img_url}${row.item.imagem}`\" style=\"height:50px\" alt=\"\" srcset=\"\"> -->\r\n            </template>\r\n          </b-table>\r\n        </b-card>\r\n\r\n        <!-- MODAL CLIENTE -->\r\n        <b-modal\r\n          id=\"modal\"\r\n          v-model=\"modalShow\"\r\n          size=\"xl\"\r\n          title=\"Clientes\"\r\n          no-close-on-backdrop\r\n          no-close-on-esc\r\n          hide-footer\r\n          centered\r\n          hide-header-close\r\n        >\r\n          <b-container fluid>\r\n            <b-row class=\"my-1\">\r\n              <b-col sm=\"1\">\r\n                <label for=\"id\">Id:</label>\r\n              </b-col>\r\n              <b-col sm=\"2\">\r\n                <b-form-input\r\n                  v-model=\"cliente.id\"\r\n                  disabled\r\n                  type=\"text\"\r\n                ></b-form-input>\r\n              </b-col>\r\n              <b-col sm=\"1\">\r\n                <label for=\"nome\">Nome:</label>\r\n              </b-col>\r\n              <b-col>\r\n                <b-form-input\r\n                  v-capitalize\r\n                  v-model=\"cliente.nome\"\r\n                  type=\"text\"\r\n                  autofocus\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n\r\n            <b-row>\r\n              <b-col sm=\"1\">\r\n                <label for=\"telefone\">Telefone:</label>\r\n              </b-col>\r\n              <b-col>\r\n                <b-form-input\r\n                  v-model=\"cliente.telefone\"\r\n                  type=\"text\"\r\n                  maxlength=\"20\"\r\n                ></b-form-input>\r\n              </b-col>\r\n              <b-col sm=\"1\">\r\n                <label for=\"email\">E-mail:</label>\r\n              </b-col>\r\n              <b-col>\r\n                <b-form-input\r\n                  v-model=\"cliente.email\"\r\n                  type=\"text\"\r\n                  ref=\"email\"\r\n                ></b-form-input>\r\n              </b-col>\r\n            </b-row>\r\n\r\n            <b-row>\r\n              <b-col sm=\"1\">\r\n                <b-form-checkbox\r\n                  v-model=\"cliente.estado\"\r\n                  name=\"check-button\"\r\n                  switch\r\n                  >Estado</b-form-checkbox\r\n                >\r\n              </b-col>\r\n            </b-row>\r\n\r\n            <b-row>\r\n              <b-form-file\r\n                v-model=\"file\"\r\n                :state=\"Boolean(file)\"\r\n                placeholder=\"Escolha uma imagem...\"\r\n                drop-placeholder=\"Drop file here...\"\r\n              >\r\n              </b-form-file>\r\n            </b-row>\r\n\r\n            <b-row>\r\n              <b-col sm=\"1\">\r\n                <b-button\r\n                  class=\"mt-3\"\r\n                  variant=\"danger\"\r\n                  block\r\n                  @click=\"fecharModal\"\r\n                  >Cancelar</b-button\r\n                >\r\n              </b-col>\r\n              <b-col>\r\n                <b-button class=\"mt-3\" variant=\"success\" block @click=\"guardar\"\r\n                  >Guardar</b-button\r\n                >\r\n              </b-col>\r\n            </b-row>\r\n          </b-container>\r\n        </b-modal>\r\n      </b-col>\r\n    </b-row>\r\n  </Layout>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Layout from \"../../../layouts/main\";\r\nimport PageHeader from \"@/components/page-header\";\r\n\r\nimport { ApiFac } from \"./ApiFac\";\r\nimport { BIcon } from \"bootstrap-vue\";\r\nimport axios from \"axios\";\r\n\r\nimport mensagensMixin from \"../../../../mixins/mensagensMixin.js\";\r\n\r\nexport default {\r\n  name: \"Cliente\",\r\n  components: {\r\n    Layout,\r\n    PageHeader,\r\n    BIcon,\r\n  },\r\n  mixins: [mensagensMixin],\r\n  props: [],\r\n  directives: {\r\n    capitalize: function (element) {\r\n      let words = element.innerText.split(\" \");\r\n\r\n      words.forEach((word, index) => {\r\n        words[index] = word.charAt(0).toUpperCase() + word.slice(1);\r\n      });\r\n\r\n      element.innerText = words.join(\" \");\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"Clientes\",\r\n      items: [\r\n        {\r\n          text: \"Dashboard\",\r\n          href: \"/home\",\r\n        },\r\n        {\r\n          text: \"Cliente\",\r\n          active: true,\r\n        },\r\n      ],\r\n      file: null,\r\n      modalShow: false,\r\n      loading: false,\r\n      filter: \"\",\r\n      api: new ApiFac(),\r\n      img_url: null,\r\n      fields: [\r\n        { key: \"id\", label: \"ID\", sortable: true },\r\n        { key: \"nome\", label: \"Nome\", sortable: true },\r\n        { key: \"telefone\", label: \"Telefone\", sortable: true },\r\n        { key: \"email\", label: \"E-mail\", sortable: true },\r\n        { key: \"estado\", label: \"estado\", sortable: true },\r\n        { key: \"acoes\", label: \"Ações\", sortable: false },\r\n        { key: \"imagem\", label: \"Imagem\", sortable: false },\r\n      ],\r\n      itens: [],\r\n      cliente: {\r\n        id: -1,\r\n        nome: \"\",\r\n        telefone: \"\",\r\n        email: \"\",\r\n        estado: true,\r\n        imagem: null,\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.iniciar();\r\n  },\r\n  methods: {\r\n    mostraImagem(obj) {\r\n      let result = \"\";\r\n      if (obj) {\r\n        result = obj;\r\n      } else {\r\n        result = this.img_url + \"media/img/empty.png\";\r\n      }\r\n      return result;\r\n    },\r\n    async newFile(event) {\r\n      this.file = event.target.files[0];\r\n      console.log(event);\r\n      await this.upload();\r\n    },\r\n    async upload(idCliente) {\r\n      const token = await this.api.getToken();\r\n      let form = \"\";\r\n      //let id = codigo\r\n      form = new FormData();\r\n      form.append(\"codigo\", idCliente);\r\n      form.append(\"imagem\", this.file);\r\n      console.log(\"formulario: \", form);\r\n      axios\r\n        .post(\"http://192.168.0.16:8000/rest/v1/upload/\", form, {\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n            Authorization: \"Bearer \" + token.access,\r\n          },\r\n        })\r\n        //axios.post('http://192.168.1.191:8000/rest/v1/upload/', form,{headers:{'Content-Type': 'multipart/form-data', 'Authorization': \"Bearer \" + token.access}})\r\n        .then((response) => {\r\n          console.log(response);\r\n        });\r\n    },\r\n    uploadAcademind(idCliente) {\r\n      const fd = new FormData();\r\n      fd.append(\"codigo\", idCliente);\r\n      fd.append(\"imagem\", this.file);\r\n      axios\r\n        .post(\"http://192.168.0.16:8000/rest/v1/upload/\", fd, {\r\n          onUploadProgress: (uploadEvent) => {\r\n            console.log(\r\n              \"Upload Progress: \" +\r\n                Math.round((uploadEvent.loaded / uploadEvent.total) * 100) +\r\n                \"%\"\r\n            );\r\n          },\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n        });\r\n    },\r\n\r\n    async iniciar() {\r\n      try {\r\n        console.log('iniciar clientes')\r\n        this.img_url = this.api.IMG_URL;\r\n        this.loading = true;\r\n        const clientes = await this.api.getCliente(-1);\r\n        console.log(\"CLIENTES: \", clientes);\r\n        if(clientes === undefined) throw new Error('Sem resultado')\r\n        if(clientes == '404') this.$router.push('404') //throw new Error('PAGINA NAO ENCONTRADA')\r\n        if(clientes.detail){\r\n          this.$swal({title: 'Atenção!', text:clientes.detail, icon: 'warning'})  \r\n          this.$router.push('login')\r\n        }\r\n        this.itens = clientes;\r\n        console.log('fim clientes')\r\n      } catch (error) {\r\n        //alert(error);\r\n        this.mensagemErro(error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n\r\n    abrirModal() {\r\n      this.file = null;\r\n      //this.cliente = this.cliente.assign({}, {})\r\n      this.cliente = {};\r\n      this.cliente.id = -1;\r\n      this.modalShow = true;\r\n    },\r\n    fecharModal() {\r\n      this.modalShow = false;\r\n    },\r\n    async guardar_old() {\r\n      try {\r\n        const resposta = await this.api.saveCliente(this.cliente);\r\n        //console.log(resposta)\r\n        if (resposta.id != undefined) {\r\n          this.mensagem(\"Cliente salvo com sucesso!\");\r\n          this.cliente = [];\r\n        } else {\r\n          this.mensagemErro(\"Erro inesperado\");\r\n        }\r\n\r\n        //await this.upload(resposta.id)\r\n        this.uploadAcademind(resposta.id);\r\n      } catch (error) {\r\n        this.mensagemErro(error);\r\n      } finally {\r\n        this.fecharModal();\r\n        this.iniciar();\r\n      }\r\n    },\r\n    async guardar() {\r\n      if(!this.validarEmail(this.cliente.email)){\r\n          this.$refs.email.focus()\r\n          this.$swal({title: 'Atenção!', text:'E-mail inválido', icon: 'warning'})  \r\n          return false\r\n      }\r\n      try {\r\n        this.loading = true\r\n        this.cliente.imagem = this.file;\r\n        const obj = new FormData();\r\n        //form.append('id', this.cliente.id)\r\n        //form.append('nome', this.cliente.nome)\r\n        //if(this.cliente.imagem!=null)\r\n        //form.append('imagem', this.cliente.imagem)\r\n\r\n        for (const key in this.cliente) {\r\n          if (key == \"imagem\") {\r\n            if (this.cliente[key] !== null)\r\n              obj.append(\"imagem\", this.cliente[key]);\r\n          } else {\r\n            obj.append(key, this.cliente[key]);\r\n          }\r\n        }\r\n\r\n        const resposta = await this.api.saveCliente(obj);\r\n        console.log(\"resposta no clientevue\", resposta);\r\n\r\n        if (resposta.id != undefined) {\r\n          this.mensagem(\"Cliente salvo com sucesso!\");\r\n          this.cliente = [];\r\n        } else {\r\n          //this.mensagemErro(resposta);\r\n          this.$swal({title: 'Erro!', text:resposta, icon: 'error'})  \r\n          return false\r\n        }\r\n        this.fecharModal();\r\n        this.iniciar();\r\n      } catch (error) {\r\n        this.mensagemErro(error);\r\n      } finally {\r\n          this.loading = false\r\n      }\r\n    },\r\n    editar(umCliente) {\r\n      this.file = null;\r\n      this.cliente = umCliente;\r\n      //this.cliente.imagem = null\r\n      //delete this.cliente.imagem\r\n      this.modalShow = true;\r\n    },\r\n    async apagar(umCliente) {\r\n      try {\r\n        if (\r\n          await this.mensagemPergunta(`${umCliente.nome}`, \"Apagar cliente\")\r\n        ) {\r\n          this.loading = true;\r\n          await this.api.deleteCliente(umCliente.id);\r\n          this.mensagem(\"Cliente apagado\");\r\n          this.iniciar();\r\n        }\r\n      } catch (error) {\r\n        this.mensagemErro(error);\r\n      } finally {\r\n        this.loading = false;\r\n        this.iniciar;\r\n      }\r\n    },\r\n    validarEmail(email){\r\n        var re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n        return re.test(email);\r\n    }\r\n  },\r\n  computed: {},\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n@media (max-width:767px){\r\n    .tamanhoImagem{\r\n        max-width:200px;\r\n    }\r\n}\r\n\r\n@media (min-width:768px){\r\n    .tamanhoImagem{\r\n        max-width:50px;\r\n    }\r\n\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cliente.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cliente.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cliente.vue?vue&type=template&id=59b643ec&\"\nimport script from \"./Cliente.vue?vue&type=script&lang=js&\"\nexport * from \"./Cliente.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Cliente.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cliente.vue?vue&type=style&index=0&lang=css&\"","/* \r\nmixin local para ser importado em cada componente\r\nO mixin global é definido no main.js\r\n */\r\nexport default{\r\n    methods: {\r\n        mensagem(mensagem, titulo=\"\", tipo=\"success\"){\r\n            this.$swal({\r\n                title: titulo,\r\n                text: mensagem,\r\n                icon: tipo,\r\n                allowOutsideClick:false,\r\n                confirmButtonText: 'Ok',\r\n            })\r\n        },\r\n        async mensagemPergunta(mensagem, titulo, tipo=\"question\"){\r\n            try {\r\n                let result = await this.$swal({\r\n                    title: titulo,\r\n                    text: mensagem,\r\n                    icon: tipo,\r\n                    showCancelButton:true,\r\n                    confirmButtonText: 'Sim',\r\n                    cancelButtonText: 'Não',\r\n                    reverseButtons:true\r\n                })\r\n                return result.isConfirmed;\r\n            } catch (error) {\r\n                ////console.log(error)\r\n            }\r\n        }\r\n    },\r\n}"],"sourceRoot":""}